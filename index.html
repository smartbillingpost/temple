<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Annapurna Sameta Kashi Vishweshwara Swamy Temple</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
  tailwind.config = {
    theme: {
      extend: {
        colors: {
          primary: "#ea580c",
          cream: "#fff7ed"
        }
      }
    }
  }
  </script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Inter', sans-serif; }
    .heading { font-family: 'Playfair Display', serif; }

    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }

    .animate-marquee {
      display: inline-block;
      min-width: 100%;
      animation: marquee 25s linear infinite;
    }
  </style>
</head>

<body class="bg-cream text-gray-800">

<!-- NAVBAR -->
<nav class="bg-white shadow fixed w-full z-50">
  <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">

    <h1 class="heading text-lg font-bold text-primary">
      Annapurna Sameta Kashi Vishwanatha Temple
    </h1>

    <button id="menuBtn" class="md:hidden text-primary text-2xl">â˜°</button>

  </div>
</nav>

<!-- SCROLLING RIBBON + AUDIO -->
<div class="bg-primary text-white py-2 overflow-hidden fixed top-16 w-full z-40">
  <div class="flex justify-between items-center px-4">

    <div id="scrollMessage" class="whitespace-nowrap animate-marquee"></div>

    <button id="openAudio"
      class="bg-white text-primary px-3 py-1 rounded text-sm">
      ðŸ”Š Audio
    </button>

  </div>
</div>

<!-- HERO -->
<section class="relative h-screen flex items-center pt-20">

  <div class="absolute inset-0 bg-cover bg-center"
       style="background-image:url('images/temple.jpg')"></div>

  <div class="absolute inset-0 bg-black/70"></div>

  <div class="relative max-w-6xl mx-auto px-6 text-white">

    <h2 class="heading text-5xl font-bold mb-4">
      Annapurna Sameta <br>
      Kashi Vishweshwara Swamy
    </h2>

    <p class="text-lg">
      Welcome to the sacred temple. Experience divine peace and blessings.
    </p>

  </div>
</section>

<!-- PANCHANG -->
<section class="py-10 bg-white">
  <div class="max-w-3xl mx-auto px-6">
    <div class="bg-cream border p-5 rounded shadow text-center">
      <h3 class="heading text-xl text-primary mb-2">
        Today's Panchagam
      </h3>
      <p id="panchangText">Loading...</p>
    </div>
  </div>
</section>

<!-- AUDIO POPUP -->
<div id="audioPopup"
  class="hidden fixed bottom-5 right-5 bg-white p-4 rounded-lg shadow-lg w-80 z-50">

  <h4 class="font-bold mb-2 text-primary">Temple Audio</h4>

  <select id="audioSelect" class="border p-2 w-full mb-2">
    <option>Loading...</option>
  </select>

  <audio id="audioPlayer" controls class="w-full"></audio>
</div>

<!-- FOOTER -->
<footer class="bg-gray-900 text-white py-8 text-center">
  Â© 2026 Temple. All rights reserved.
</footer>

<!-- ================= SCRIPTS ================= -->

<script>
// Scroll message
fetch("scroll.txt")
  .then(res => res.text())
  .then(data => {
    document.getElementById("scrollMessage").innerText = data;
  });
</script>

<script>
// Panchang
async function loadPanchang() {
  try {
    const res = await fetch("panchang.json");
    const data = await res.json();
    document.getElementById("panchangText").innerText =
      data.today_panchang;
  } catch {
    document.getElementById("panchangText").innerText =
      "Panchang unavailable";
  }
}
loadPanchang();
</script>

<script>
// Audio popup
const btn = document.getElementById("openAudio");
const popup = document.getElementById("audioPopup");
const select = document.getElementById("audioSelect");
const player = document.getElementById("audioPlayer");

btn.onclick = () => popup.classList.toggle("hidden");

// Load audio files dynamically
async function loadAudioList() {
  try {
    const res = await fetch("/audio-list");
    const files = await res.json();

    select.innerHTML = '<option value="">Select Audio</option>';

    files.forEach(file => {
      const option = document.createElement("option");
      option.value = "audio/" + file;
      option.textContent = file.replace(".mp3", "");
      select.appendChild(option);
    });

  } catch {
    select.innerHTML = '<option>Error loading audio</option>';
  }
}

select.addEventListener("change", () => {
  if (select.value) {
    player.src = select.value;
    player.play();
  }
});

loadAudioList();
</script>

</body>
</html>